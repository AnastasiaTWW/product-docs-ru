# Включение блокировки части сайта

Вы можете включить блокировку отдельной части сайта через конфигурационный
файл Wallarm-NGINX.

Блокировка включается следующими директивами:

* `location` – директива NGINX.
* `wallarm_mode block` – директива Валарм.

Настройка блокировки части сайта:

1. Откройте для редактирования конфигурационный файл в папке `/etc/nginx-wallarm`.
2. Задайте правила блокировки (переменная `$wallarm_mode_real`) и часть сайта, для которой необходимо применить эти правила (блок `location`):

	```
	http {
	    ...
	    geo $wallarm_mode_real { 
	        default block;
	        1.1.1.1/24 monitoring;
	        2.2.2.2 off;
	    }
	    ...
	    server {
	        ...
	        location /<some_location>/ { 
	            wallarm_mode $wallarm_mode_real;
	        }
	    } 
	}
	```
    
    Правила, описанные в переменной `$wallarm_mode_real`, применяются к запросам, отправляемым на URL, которые содержат `/some_location/`:
	
    * `default block`&nbsp;— по умолчанию обрабатывать все запросы и блокировать атаки;
    * `1.1.1.1/24 monitoring`&nbsp;— обрабатывать все запросы с IP‑адресов из диапазона «1.1.1.1» — «1.1.1.254», но не блокировать даже при обнаружении атак;
    * `2.2.2.2 off`&nbsp;— не фильтровать запросы с IP‑адреса «2.2.2.2».

--8<-- "../include/scanner-whitelist-warning.md"