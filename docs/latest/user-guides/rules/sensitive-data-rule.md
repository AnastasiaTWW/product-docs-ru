[img-masking]:      ../../images/user-guides/rules/sensitive-data-rule.png

# Маскировка данных

WAF‑нода передает в облако Валарм следующие данные:

* Сериализованные запросы с атаками
* Системные счетчики Валарм
* Системную статистику — загрузку CPU, оперативной памяти и т.д.
* Статистику о работе Валарм — количество обработанных NGINX запросов, статистику Tarantool и т.д.
* Информацию о характере трафика, необходимую для корректного определения структуры приложения

Некоторые данные нежелательно передавать за пределы сервера, на котором они обрабатываются. Обычно к таким относятся авторизационные (куки, токены, пароли), персональные и платежные данные.

WAF‑нода Валарм поддерживает маскировку данных в запросе. Настоящие значения будут заменены на `*` и не будут доступны не только в облаке Валарм, но и в модуле локальной постаналитики. Это позволяет гарантировать, что соответствующие данные не могут попасть за пределы доверенной среды.

Это может повлиять на отображение атак, их перепроверку а также на детект атак перебора.

## Пример&nbsp;— маскировка значения cookie

**Если** выполняются следующие условия:

* приложение доступно на домене *example.com*;
* приложение использует для аутентификации пользователей cookie *PHPSESSID*;
* политики безопасности запрещают доступ к этой информации сотрудникам, использующим Валарм.

**То** для создания правила по маскировке значения этой cookie нужно выполнить следующие действия:

1. Зайдите во вкладку *Правила*;
1. Найдите ветку для `example.com/**/*.*` и нажмите *Добавить правило*;
1. Выберите *Маскировать как конфиденциальные данные*;
1. Выберите параметр *Header* и введите его значение `COOKIE`, выберите параметр *cookie* и введите его значение `PHPSESSID` после *в этой части запроса*;
1. Нажмите *Создать*.

![!Маскировка конфиденциальных данных][img-masking]
