[img-vpatch-example1]:      ../../images/user-guides/rules/vpatch-rule-1.png
[img-vpatch-example2]:      ../../images/user-guides/rules/vpatch-rule-2.png

# Виртуальные патчи

Виртуальный патч позволяет заблокировать вредоносные запросы даже при работе в режиме мониторинга, или когда в запросе не обнаружен какой-либо из известных векторов атак.

Виртуальные патчи особенно полезны, когда нет возможности быстро исправить критическую уязвимость в коде или установить необходимые обновления безопасности.

Если выбраны типы атак, то запрос будет заблокирован только в том случае, если WAF‑нода обнаружит в соответствующем параметре атаку одного из перечисленных типов.

Если выбран параметр *Любой запрос*, то запрос будет заблокирован, если в нем присутствует выбранный параметр, даже если в нем не обнаружен вектор атаки.


## Пример&nbsp;— блокировка SQLi-атаки в GET-параметре `id`

**Если** выполняются следующие условия:

* приложение доступно на домене *example.com*;
* в приложении есть SQL‑инъекция в параметре *id*;
* WAF‑нода работает в режиме мониторинга;
* необходимо блокировать эту уязвимость.

**Тогда** для создания виртуального патча:

1. Зайдите во вкладку *Правила*;
1. Найдите ветку `example.com/**/*.*` и нажмите *Добавить правило*;
1. Выберите *Применить виртуальный патч*;
1. Выберите тип атаки *SQLi*;
1. Выберите параметр *GET* и введите его значение `id` после *в этой части запроса*;
1. Нажмите *Создать*.

![!Виртуальный патч для конкретного типа запроса][img-vpatch-example1]


## Пример - блокировать все запросы с GET-параметром `refresh`

**Если** выполняются следующие условия

* приложение доступно на домене *example.com*;
* приложение падает при передаче GET параметра `refresh`;
* необходимо блокировать эту уязвимость.

**То** для создания виртуального патча

1. Зайдите во вкладку *Правила*;
1. Найдите ветку `example.com/**/*.*` и нажмите *Добавить правило*;
1. Выберите *Применить виртуальный патч*;
1. Выберите *Любой запрос*;
1. Выберите параметр *GET* и введите его значение `refresh` после *в этой части запроса*;
1. Нажмите *Создать*.

![!Виртуальный патч для любого типа запроса][img-vpatch-example2]
